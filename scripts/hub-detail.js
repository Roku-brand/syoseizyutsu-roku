const hubDetailData = {
  overlap: {
    title: "会議で発言が重なったときの切り替え術",
    summary:
      "被せてしまった瞬間に場を整え、議題を前進させるためのリカバリー術をまとめました。",
    meta: "編集チームより：会議の温度を下げずに進行を戻すためのメモ。",
    tags: ["仕事", "会話", "衝突回避"],
    techniques: [
      "「失礼、今の発言を受けて補足します」と一言クッションを挟む。",
      "「先に続けてください、あとで短く補足します」と優先権を渡す。",
      "「今のポイントをメモしました、次に整理します」と場を安心させる。",
      "「話題を戻しますね」と議題の番号や資料を示して再フォーカスする。",
      "「結論から言うと〜」で話を短くまとめ直す。",
      "「今の発言とつなげると〜」で被せた印象を統合に変える。",
      "「一旦止めます、確認だけ」と合意の確認を挟む。",
      "「議論の前提を揃えます」とスライドやメモを指差す。",
      "「ここまでで質問ありますか？」と介入の機会を作る。",
      "「あと1分だけ」など時間枠を提示して発言を圧縮する。",
      "「では◯◯さんに戻します」と指名で発言権を返す。",
      "「次の議題に移る前に一点だけ」など流れを可視化する。",
    ],
    nextSteps: [
      "会議後に短いメモで「補足意図」を伝え、関係を補強する。",
      "議事録に「誰の発言を拾ったか」を明記して誤解を防ぐ。",
      "次回は冒頭で「被せたら一旦譲る」ルールを共有する。",
    ],
  },
  alternative: {
    title: "断りたい依頼に「代替案」で返す術",
    summary:
      "断りの衝撃を和らげ、相手の目的を損なわない返し方をテンプレ化しました。",
    meta: "最終編集：2024/03/21",
    tags: ["断る", "チーム", "関係維持"],
    techniques: [
      "「今週は難しいのですが、来週なら可能です」と時間をずらす。",
      "「私ではなく◯◯さんが得意です」と担当の再提案をする。",
      "「この範囲までなら対応できます」と部分受けを提示する。",
      "「今の優先順位が高い案件がある」と背景を短く共有する。",
      "「目的は◯◯ですか？」とゴールを確認し代替策を探る。",
      "「テンプレを渡すのでご活用ください」と資産提供で支援する。",
      "「レビューなら時間を確保できます」と役割変更を提案する。",
      "「この条件なら前倒しできます」と条件付きで返す。",
      "「同じ課題を解決した過去事例」を示してヒントを渡す。",
      "「依頼の緊急度を確認」し、優先順位の再調整を促す。",
      "「リソースが戻り次第連絡します」と次の連絡点を示す。",
      "「別の方法を一緒に考えませんか？」と共創姿勢で締める。",
    ],
    nextSteps: [
      "断った内容はタスク管理にメモし、後で声掛けを行う。",
      "断りの理由は簡潔にし、相手の感情を刺激しない表現にする。",
      "代替案は1〜2案に絞り、選びやすくする。",
    ],
  },
  cooldown: {
    title: "怒りを覚えた直後の「冷却ルーティン」",
    summary:
      "感情が高ぶった直後に、身体と認知の温度を下げるための短期ルーティンです。",
    meta: "投稿者：コミュニティ共有",
    tags: ["感情", "セルフケア", "落ち着く"],
    techniques: [
      "深呼吸を「4秒吸う→6秒吐く」で3セット行う。",
      "水を一口飲み、体温と注意をリセットする。",
      "「今の感情は◯◯だ」と言語化し、ラベリングする。",
      "肩・首をゆっくり回し、緊張を身体から抜く。",
      "「今は判断を保留」と自分に宣言し、決断を遅らせる。",
      "視線を遠くに移し、景色や物体を5つ数える。",
      "「相手の意図は未確定」と仮置きして即断を避ける。",
      "メモに「事実」と「解釈」を分けて書く。",
      "短い散歩や立ち上がりで筋肉を動かす。",
      "スマホや通知を5分遮断して刺激を減らす。",
      "「今は反応ではなく対応」と言い換える。",
      "落ち着くまでは返信を下書きに留める。",
    ],
    nextSteps: [
      "30分以内に整理メモを見直し、必要なら謝意や確認を送る。",
      "再発しそうな場面を記録し、予兆を学習する。",
      "トリガーが続く場合は休憩や相談の予定を入れる。",
    ],
  },
  observation: {
    title: "初対面で距離感を掴む「観察シート」",
    summary:
      "初対面の相手と会うときに、テンポや好みを把握するための観察ポイント集です。",
    meta: "新着：1日前",
    tags: ["対人", "初対面", "ペース調整"],
    techniques: [
      "話す速度：相手のテンポに合わせて語尾を調整する。",
      "声量：相手が小声ならトーンを落として安心感を出す。",
      "視線の使い方：目線の頻度を観察し、圧をかけすぎない。",
      "相づちのタイプ：相手が頷き派か言語派かを見極める。",
      "間の長さ：沈黙が短いか長いかで質問の間隔を変える。",
      "話題の方向：仕事志向か雑談志向かを確認する。",
      "共通点の反応：共通話題で表情が変わるかを見る。",
      "質問の深さ：浅めの質問から段階的に深める。",
      "言葉の選び方：専門用語への反応をチェックする。",
      "ジェスチャーの量：身振りが多いならこちらも動きを増やす。",
      "笑いのポイント：軽い冗談の反応で温度を測る。",
      "終わり方：会話を締めるタイミングを把握する。",
    ],
    nextSteps: [
      "観察した項目を1〜2行でメモし、次回の接触に活かす。",
      "相手が居心地よく感じた瞬間を覚え、再現する。",
      "距離が近すぎると感じたら「話題の粒度」を一段下げる。",
    ],
  },
};

const detailContainer = document.getElementById("hub-detail");
const emptyState = document.getElementById("hub-empty");
const backLink = document.getElementById("hub-back-link");

const params = new URLSearchParams(window.location.search);
const topic = params.get("topic");

if (!topic || !hubDetailData[topic]) {
  detailContainer.innerHTML = "";
  emptyState.classList.remove("is-hidden");
} else {
  const detail = hubDetailData[topic];
  document.title = `処世術禄 | ${detail.title}`;
  emptyState.classList.add("is-hidden");
  const tagList = detail.tags
    .map((tag) => `<span class="tag tag--compact">${tag}</span>`)
    .join("");
  const techniqueList = detail.techniques
    .map((item) => `<li>${item}</li>`)
    .join("");
  const nextList = detail.nextSteps
    .map((item) => `<li>${item}</li>`)
    .join("");

  detailContainer.innerHTML = `
    <div class="detail-card detail-card--page hub-detail-card">
      <div class="detail-header">
        <p class="hub-detail-eyebrow">みんなの処世術</p>
        <h2>${detail.title}</h2>
        <p class="detail-summary">${detail.summary}</p>
        <p class="hub-detail-meta">${detail.meta}</p>
        <div class="tag-list tag-list--compact">${tagList}</div>
      </div>
      <div class="detail-body">
        <section>
          <h4>処世術リスト（10+）</h4>
          <ol class="hub-technique-list">
            ${techniqueList}
          </ol>
        </section>
        <section>
          <h4>次の一手</h4>
          <ul>
            ${nextList}
          </ul>
        </section>
      </div>
    </div>
  `;
}

if (backLink) {
  backLink.href = "hub.html";
}
